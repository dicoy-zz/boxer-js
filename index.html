<!--Last update = 2012-25-10 3:41AM-->
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Box Loader</title>
        <style media="screen">
            body {
                background: #333;
                margin: 0 30px;}

        	.box {
				stroke:black;
				stroke-width:5;
				opacity:0.5;}
			svg {
				padding: 15px;}
        </style>
    </head>
    <body>
		<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
		</svg>
		<script type_"text/javascript">
			var lastBox = 0;
			var colors = ["red","orange","yellow","green","blue","purple","magenta","cyan"];
			var boxes = []
			var makeBox = function (x,y,c){
				svgDoc=document.getElementsByTagName('svg')[0]
				var shape = document.createElementNS("http://www.w3.org/2000/svg", "rect");
				shape.setAttribute("fill",c);
				shape.setAttribute("class","box");
				shape.setAttribute("x",x);
				shape.setAttribute("y",y);
				shape.setAttribute("rx","20");
				shape.setAttribute("ry","20");
				shape.setAttribute("width","320");
				shape.setAttribute("height","320");
				shape.setAttribute("id","box_" + lastBox++);
				svgDoc.appendChild(shape);
				return document.getElementById("box_" + (lastBox-1));
				}
			var romoveBox = function(id){
				id.parentNode.removeChild(id);
				return id;
				}
			vBoxes = Math.floor(window.innerHeight/335);
			hBoxes = Math.floor((window.innerWidth-45)/335);
			for (y=0;y<vBoxes;++y){
				for (x=0;x<hBoxes;++x){
					boxes.push(makeBox(x*335,y*335,colors[(y*(1+vBoxes)+x)%7]));
					}}
			window.onresize = function(event) {
			    vBoxes=Math.floor(window.innerHeight/335);
			    hBoxes=Math.floor((window.innerWidth-45)/335);
		for (i=0;i<boxes.length;++i){
		    nx = i%hBoxes;
		    ny = (i-nx)/hBoxes;
		    boxes[i].setAttribute("x",(nx)*335);
			    boxes[i].setAttribute("y",(ny)*335);
				window.console.log('moving '+i+' to ('+nx+','+ny+')|'+i+'|'+hBoxes+'|'+vBoxes);
			    }
			    /*for (x=boxes.length%hBoxes;x<hBoxes;++x){
				    for (y=boxes.length%hBoxes;y<vBoxes;++y){
				        id = y*(1+vBoxes)+x;
					    boxes.push(makeBox(x*335,y*335,colors[(id)%7]));
					    window.console.log('creating '+id+' at '+x+', '+y);
				    }}*/}
		</script>
    </body>
</html>
